<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  Launch demo modal
</button>

<div class="container app-intro">
  <h1 class="text-center">List of People</h1>
</div>

<div class="container app-main">

<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">&nbsp;</th> <!--Avatars-->
      <th scope="col">First Name</th>
      <th scope="col">Last Name</th>
      <th scope="col">Email</th>
      <th scope="col">Job Title</th>
      <th scope="col">&nbsp;</th> <!--Action Buttons-->
    </tr>
  </thead>
  <tbody>
    {{#each peoples}}
    <tr>
      <td>
        {{#if avatar}}
        <img src="{{avatar}}" alt="{{first_name}} - {{last_name}}" width="50" height="50">
        {{else}}
        &nbsp;
        {{/if}}
      </td>
      <td>{{first_name}}</td>
      <td>{{last_name}}</td>
      <td>{{email}}</td>
      <td>{{job_title}}</td>
      <td>
        <a href="/view/{{id}}" title="view" ><i class="fas fa-binoculars"></i></a>
        <a href="javascript:void(0);" onclick="deleteItem(&quot;{{id}}&quot;)" title="delete" ><i class="fas fa-trash-alt"></i></a>
      </td>
    </tr>
    {{/each}}
  </tbody>
</table>

</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Create a Person</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <label>First Name:<span style="color: red;">*</span></label>
        <input type="text" class="form-control first_name" id="first_name" name="first_name" required /><br/>
        <label>Last Name:<span style="color: red;">*</span></label>
        <input type="text" class="form-control last_name" id="last_name" name="last_name" required /><br/>
        <label>Email:<span style="color: red;">*</span></label>
        <input type="email" class="form-control email" id="email" name="email" required /><br/>
        <label>Job Title:<span style="color: red;">*</span></label>
        <input type="text" class="form-control job_title" id="job_title" name="job_title" required /><br/>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary createPerson">Save</button>
      </div>
    </div>
  </div>
</div>
 
<script>
  
  $(function() {
    $( ".createPerson" ).on( "click", function() {
      createItem(); 
    });
  });

    function createItem(){// pass your data in method
      let firstName = $('#first_name').val();
      let lastName = $('#last_name').val(); 
      let email = $('#email').val(); 
      let jobTitle = $('#job_title').val(); 

      let createObj = {
        first_name: firstName, 
        last_name: lastName, 
        email: email, 
        job_title: jobTitle
      };

     $.ajax({
             type: "POST",
             url: "https://umbrage-bradley.herokuapp.com/people",
             data: JSON.stringify(createObj),// now data come in this function
             contentType: "application/json",
             success: function (data, status, jqXHR) {
               window.location.href = "https://umbrage-bradley.herokuapp.com";
             },

             error: function (jqXHR, status) {
                 // error handler
                 console.log(jqXHR);
                 alert('fail' + status.code);
             }
          });
    }


  function deleteItem(id){// pass your data in method
     $.ajax({
             type: "DELETE",
             url: "https://umbrage-bradley.herokuapp.com/delete/"+id+"",
             contentType:'application/json',
             success: function (data, status, jqXHR) {
               window.location.href = "https://umbrage-bradley.herokuapp.com";
             },

             error: function (jqXHR, status) {
                 // error handler
                 console.log(jqXHR);
                 alert('fail' + status.code);
             }
          });
    }
</script>